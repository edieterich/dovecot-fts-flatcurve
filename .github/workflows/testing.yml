---
name: Testing for dovecot-fts-flatcurve

on:
  push:
    paths:
      - 'src/**'
  pull_request:
  workflow_dispatch:

jobs:
  debian_test:
    name: Testing on Debian
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          sparse-checkout: .github
      - name: Copy test files to base directory
        run: |
          cp -av ./.github/actions/flatcurve-test-debian/* ./
          cp -av ./.github/common/* ./
      - uses: ./
  alpine_test:
    name: Testing on Alpine
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          sparse-checkout: .github
      - name: Copy test files to base directory
        run: |
          cp -av ./.github/actions/flatcurve-test-alpine/* ./
          cp -av ./.github/common/* ./
      - uses: ./
